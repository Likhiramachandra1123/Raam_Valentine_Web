<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doraemon Valentine Experience</title>
  <style>
    body, html { margin: 0; padding: 0; height: 100%; overflow-x: hidden; font-family: 'Arial', sans-serif; }
    section {
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2em;
      color: white;
      position: relative;
      z-index: 10;
      flex-direction: column;
      opacity: 0;
    }
    canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
    button { margin: 10px; padding: 10px 20px; font-size: 1em; cursor: pointer; }
    .options { display: flex; flex-direction: column; margin-top: 20px; }
    .options button { background: rgba(255,255,255,0.8); color: black; border: none; border-radius: 5px; }
    #reel { display: flex; overflow-x: scroll; height: 100vh; align-items: center; scroll-snap-type: x mandatory; }
    #reel img { height: 80%; margin: 0 10px; border: 5px solid white; border-radius: 10px; scroll-snap-align: center; }
    #final h1 { font-size: 3em; color: pink; text-shadow: 0 0 20px red; }
    body.locked { overflow: hidden; }
  </style>
</head>
<body class="locked">
  <canvas id="bg"></canvas>

  <section id="intro">
    <div>
      <h1>Will you be my forever?</h1>
      <button id="yesBtn">Yes üíñ</button>
      <button id="noBtn">No üòú</button>
    </div>
  </section>

  <section id="q1">
    <h2>Do you know how much I love you? üíï</h2>
    <div class="options">
      <button>More than Doraemon loves gadgets</button>
      <button>More than Nobita loves Shizuka</button>
      <button>Infinity ‚ù§Ô∏è</button>
    </div>
  </section>

  <section id="q2">
    <h2>Will you always hold my hand? ü§≤</h2>
    <div class="options">
      <button>Yes, forever</button>
      <button>Only if you share snacks</button>
      <button>Never letting go üíñ</button>
    </div>
  </section>

  <section id="reel">
    <img src="img1.jpg">
    <img src="img2.jpg">
    <img src="img3.jpg">
    <img src="img4.jpg">
    <img src="img5.jpg">
    <img src="img6.jpg">
  </section>

  <section id="final">
    <h1>You are my forever ‚ù§Ô∏è</h1>
  </section>

  <audio id="song" src="yoursong.mp3"></audio>

  <!-- Three.js + GSAP -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

  <script>
    // --- Three.js Scene ---
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById("bg"), antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);

    const light = new THREE.PointLight(0xffffff, 1);
    light.position.set(10,10,10);
    scene.add(light);

    // Doraemon & Nobita spheres
    const doraemon = new THREE.Mesh(new THREE.SphereGeometry(3,32,32), new THREE.MeshPhongMaterial({color:0x0000ff}));
    const nobita = new THREE.Mesh(new THREE.SphereGeometry(2.5,32,32), new THREE.MeshPhongMaterial({color:0xffff00}));
    doraemon.position.x = -5;
    nobita.position.x = 5;
    scene.add(doraemon);
    scene.add(nobita);

    // Floating hearts
    const hearts = [];
    const heartGeometry = new THREE.SphereGeometry(0.2, 16, 16);
    const heartMaterial = new THREE.MeshPhongMaterial({ color: 0xff0000 });
    for (let i = 0; i < 50; i++) {
      const heart = new THREE.Mesh(heartGeometry, heartMaterial);
      heart.position.set((Math.random()-0.5)*20, (Math.random()-0.5)*20, (Math.random()-0.5)*20);
      scene.add(heart);
      hearts.push(heart);
    }

    camera.position.z = 15;

    function animate() {
      requestAnimationFrame(animate);
      doraemon.rotation.y += 0.01;
      nobita.rotation.y -= 0.01;
      hearts.forEach(h => {
        h.rotation.x += 0.01;
        h.rotation.y += 0.01;
      });
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // --- Interaction Logic ---
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const song = document.getElementById("song");

    noBtn.onclick = () => {
      yesBtn.style.transform = "scale(1.5)";
    };

    yesBtn.onclick = () => {
      document.body.classList.remove("locked");
      song.play();
      // reveal scroll sections
      gsap.utils.toArray("section").forEach(section => {
        gsap.to(section, {
          opacity: 1,
          duration: 1,
          scrollTrigger: {
            trigger: section,
            start: "top center",
            toggleActions: "play none none reverse"
          }
        });
      });
    };

    // Answer gating
    document.querySelectorAll("#q1 .options button").forEach(btn => {
      btn.onclick = () => {
        ScrollTrigger.refresh(); // allow scroll to next
      };
    });
    document.querySelectorAll("#q2 .options button").forEach(btn => {
      btn.onclick = () => {
        ScrollTrigger.refresh();
      };
    });

    // Camera scroll animations
    gsap.registerPlugin(ScrollTrigger);
    gsap.to(camera.position, {
      z: 8,
      scrollTrigger: {
        trigger: "#q1",
        start: "top center",
        end: "bottom center",
        scrub: true
      }
    });
    gsap.to(camera.rotation, {
      y: Math.PI/2,
      scrollTrigger: {
        trigger: "#q2",
        start: "top center",
        end: "bottom center",
        scrub: true
      }
    });
    gsap.to(camera.position, {
      x: 5,
      scrollTrigger: {
        trigger: "#reel",
        start: "top center",
        end: "bottom center",
        scrub: true
      }
    });
  </script>
</body>
</html>
